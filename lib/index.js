!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).bundlea=t()}(this,function(){"use strict";function c(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===s.call(e)}function p(e){if(e&&"[object Object]"===s.call(e)){var t,n=o.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&o.call(e.constructor.prototype,"isPrototypeOf");if(!e.constructor||n||r){for(t in e);return void 0===t||o.call(e,t)}}}function u(e,t){n&&"__proto__"===t.name?n(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue}function d(e,t){if("__proto__"===t){if(!o.call(e,t))return;if(r)return r(e,t).value}return e[t]}function b(){var e,t,n,r,o,i=arguments[0],a=1,s=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[1]||{},a=2),(null==i||"object"!=typeof i&&"function"!=typeof i)&&(i={});a<s;++a)if(null!=(e=arguments[a]))for(t in e)o=d(i,t),i!==(n=d(e,t))&&(l&&n&&(p(n)||(r=c(n)))?(o=r?(r=!1,o&&c(o)?o:[]):o&&p(o)?o:{},u(i,{name:t,newValue:b(l,o,n)})):void 0!==n&&u(i,{name:t,newValue:n}));return i}var i,a,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=Object.prototype.hasOwnProperty,s=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,e={exports:{}},t=(a=(i=e).exports,function(){var _={function:!0,object:!0}[typeof window]&&window||this,n=a,e=!i.nodeType&&i,t=n&&e&&"object"==typeof l&&l,s=(!t||t.global!==t&&t.window!==t&&t.self!==t||(_=t),Math.pow(2,53)-1),P=/\bOpera/,t=Object.prototype,r=t.hasOwnProperty,A=t.toString;function o(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function B(e){return e=L(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:o(e)}function R(e,t){for(var n in e)r.call(e,n)&&t(e[n],n,e)}function W(e){return null==e?o(e):A.call(e).slice(8,-1)}function j(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function F(n,r){var o=null,e=n,t=function(e,t){o=r(o,e,t,n)},i=-1,a=e?e.length:0;if("number"==typeof a&&-1<a&&a<=s)for(;++i<a;)t(e[i],i,e);else R(e,t);return o}function L(e){return String(e).replace(/^ +| +$/g,"")}function $(i){var t,n,e,r,o=_,a=i&&"object"==typeof i&&"String"!=W(i),s=(a&&(o=i,i=null),o.navigator||{}),l=s.userAgent||"",c=(i=i||l,a?!!s.likeChrome:/\bChrome\b/.test(i)&&!/internal|\n/i.test(A.toString())),p="Object",u=a?p:"ScriptBridgingProxyObject",d=a?p:"Environment",b=a&&o.java?"JavaPackage":W(o.java),p=a?p:"RuntimeObject",b=/\bJava/.test(b)&&o.java,d=b&&W(o.environment)==d,f=b?"a":"α",h=b?"b":"β",g=o.document||{},m=o.operamini||o.opera,a=P.test(a=a&&m?m["[[Class]]"]:W(m))?a:m=null,S=i,x=[],y=null,l=i==l,w=l&&m&&"function"==typeof m.version&&m.version(),v=F([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,t){return e||RegExp("\\b"+(t.pattern||j(t))+"\\b","i").exec(i)&&(t.label||t)}),k=F(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(e,t){return e||RegExp("\\b"+(t.pattern||j(t))+"\\b","i").exec(i)&&(t.label||t)}),O=M([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),E=F({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},function(e,t,n){return e||(t[O]||t[/^[a-z]+(?: +[a-z]+\b)*/i.exec(O)]||RegExp("\\b"+j(n)+"(?:\\b|\\w*\\d)","i").exec(i))&&n}),T=F(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(e,t){var n,r,o=t.pattern||j(t);return!e&&(e=RegExp("\\b"+o+"(?:/[\\d.]+|[ \\w.]*)","i").exec(i))&&(n=e,o=o,t=t.label||t,r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},o&&t&&/^Win/i.test(n)&&!/^Windows Phone /i.test(n)&&(r=r[/[\d.]+$/.exec(n)])&&(n="Windows "+r),n=String(n),e=n=B((n=o&&t?n.replace(RegExp(o,"i"),t):n).replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])),e});function M(e){return F(e,function(e,t){var n=t.pattern||j(t);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(i)||RegExp("\\b"+n+" *\\w+-[\\w]*","i").exec(i)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(i))&&((e=String(t.label&&!RegExp(n,"i").test(t.label)?t.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),t=t.label||t,e=B(e[0].replace(RegExp(n,"i"),t).replace(RegExp("; *(?:"+t+"[_-])?","i")," ").replace(RegExp("("+t+")[-_.]?(\\w)","i"),"$1 $2"))),e})}function C(e){return F(e,function(e,t){return e||(RegExp(t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(i)||0)[1]||null})}if(v=v&&[v],/\bAndroid\b/.test(T)&&!O&&(t=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(i))&&(O=L(t[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),E&&!O?O=M([E]):E&&(O=O&&O.replace(RegExp("^("+j(E)+")[-_.\\s]","i"),E+" ").replace(RegExp("^("+j(E)+")[-_.]?(\\w)","i"),E+" $2")),(t=/\bGoogle TV\b/.exec(O))&&(O=t[0]),/\bSimulator\b/i.test(i)&&(O=(O?O+" ":"")+"Simulator"),"Opera Mini"==k&&/\bOPiOS\b/.test(i)&&x.push("running in Turbo/Uncompressed mode"),"IE"==k&&/\blike iPhone OS\b/.test(i)?(E=(t=$(i.replace(/like iPhone OS/,""))).manufacturer,O=t.product):/^iP/.test(O)?(k=k||"Safari",T="iOS"+((t=/ OS ([\d_]+)/i.exec(i))?" "+t[1].replace(/_/g,"."):"")):"Konqueror"==k&&/^Linux\b/i.test(T)?T="Kubuntu":E&&"Google"!=E&&(/Chrome/.test(k)&&!/\bMobile Safari\b/i.test(i)||/\bVita\b/.test(O))||/\bAndroid\b/.test(T)&&/^Chrome/.test(k)&&/\bVersion\//i.test(i)?(k="Android Browser",T=/\bAndroid\b/.test(T)?T:"Android"):"Silk"==k?(/\bMobi/i.test(i)||(T="Android",x.unshift("desktop mode")),/Accelerated *= *true/i.test(i)&&x.unshift("accelerated")):"UC Browser"==k&&/\bUCWEB\b/.test(i)?x.push("speed mode"):"PaleMoon"==k&&(t=/\bFirefox\/([\d.]+)\b/.exec(i))?x.push("identifying as Firefox "+t[1]):"Firefox"==k&&(t=/\b(Mobile|Tablet|TV)\b/i.exec(i))?(T=T||"Firefox OS",O=O||t[1]):!k||(t=!/\bMinefield\b/i.test(i)&&/\b(?:Firefox|Safari)\b/.exec(k))?(k&&!O&&/[\/,]|^[^(]+?\)/.test(i.slice(i.indexOf(t+"/")+8))&&(k=null),(t=O||E||T)&&(O||E||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(T))&&(k=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(T)?T:t)+" Browser")):"Electron"==k&&(t=(/\bChrome\/([\d.]+)\b/.exec(i)||0)[1])&&x.push("Chromium "+t),w=w||C(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",j(k),"(?:Firefox|Minefield|NetFront)"]),(t=("iCab"==v&&3<parseFloat(w)?"WebKit":/\bOpera\b/.test(k)&&(/\bOPR\b/.test(i)?"Blink":"Presto"))||(/\b(?:Midori|Nook|Safari)\b/i.test(i)&&!/^(?:Trident|EdgeHTML)$/.test(v)?"WebKit":!v&&/\bMSIE\b/i.test(i)&&("Mac OS"==T?"Tasman":"Trident"))||"WebKit"==v&&/\bPlayStation\b(?! Vita\b)/i.test(k)&&"NetFront")&&(v=[t]),"IE"==k&&(t=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(i)||0)[1])?(k+=" Mobile",T="Windows Phone "+(/\+$/.test(t)?t:t+".x"),x.unshift("desktop mode")):/\bWPDesktop\b/i.test(i)?(k="IE Mobile",T="Windows Phone 8.x",x.unshift("desktop mode"),w=w||(/\brv:([\d.]+)/.exec(i)||0)[1]):"IE"!=k&&"Trident"==v&&(t=/\brv:([\d.]+)/.exec(i))&&(k&&x.push("identifying as "+k+(w?" "+w:"")),k="IE",w=t[1]),l){if(r="global",I=null!=(e=o)?typeof e[r]:"number",/^(?:boolean|number|string|undefined)$/.test(I)||"object"==I&&!e[r])W(t=o.runtime)==u?(k="Adobe AIR",T=t.flash.system.Capabilities.os):W(t=o.phantom)==p?(k="PhantomJS",w=(t=t.version||null)&&t.major+"."+t.minor+"."+t.patch):"number"==typeof g.documentMode&&(t=/\bTrident\/(\d+)/i.exec(i))?(w=[w,g.documentMode],(t=+t[1]+4)!=w[1]&&(x.push("IE "+w[1]+" mode"),v&&(v[1]=""),w[1]=t),w="IE"==k?String(w[1].toFixed(1)):w[0]):"number"==typeof g.documentMode&&/^(?:Chrome|Firefox)\b/.test(k)&&(x.push("masking as "+k+" "+w),k="IE",w="11.0",v=["Trident"],T="Windows");else if(b&&(S=(t=b.lang.System).getProperty("os.arch"),T=T||t.getProperty("os.name")+" "+t.getProperty("os.version")),d){try{w=o.require("ringo/engine").version.join("."),k="RingoJS"}catch(e){(t=o.system)&&t.global.system==o.system&&(k="Narwhal",T=T||t[0].os||null)}k=k||"Rhino"}else"object"==typeof o.process&&!o.process.browser&&(t=o.process)&&("object"==typeof t.versions&&("string"==typeof t.versions.electron?(x.push("Node "+t.versions.node),k="Electron",w=t.versions.electron):"string"==typeof t.versions.nw&&(x.push("Chromium "+w,"Node "+t.versions.node),k="NW.js",w=t.versions.nw)),k||(k="Node.js",S=t.arch,T=t.platform,w=(w=/[\d.]+/.exec(t.version))?w[0]:null));T=T&&B(T)}if(w&&(t=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(w)||/(?:alpha|beta)(?: ?\d)?/i.exec(i+";"+(l&&s.appMinorVersion))||/\bMinefield\b/i.test(i)&&"a")&&(y=/b/i.test(t)?"beta":"alpha",w=w.replace(RegExp(t+"\\+?$"),"")+("beta"==y?h:f)+(/\d+\+?/.exec(t)||"")),"Fennec"==k||"Firefox"==k&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(T))k="Firefox Mobile";else if("Maxthon"==k&&w)w=w.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(O))"Xbox 360"==O&&(T=null),"Xbox 360"==O&&/\bIEMobile\b/.test(i)&&x.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(k)&&(!k||O||/Browser|Mobi/.test(k))||"Windows CE"!=T&&!/Mobi/i.test(i))if("IE"==k&&l)try{null===o.external&&x.unshift("platform preview")}catch(e){x.unshift("embedded")}else(/\bBlackBerry\b/.test(O)||/\bBB10\b/.test(i))&&(t=(RegExp(O.replace(/ +/g," *")+"/([.\\d]+)","i").exec(i)||0)[1]||w)?(T=((t=[t,/BB10/.test(i)])[1]?(O=null,E="BlackBerry"):"Device Software")+" "+t[0],w=null):this!=R&&"Wii"!=O&&(l&&m||/Opera/.test(k)&&/\b(?:MSIE|Firefox)\b/i.test(i)||"Firefox"==k&&/\bOS X (?:\d+\.){2,}/.test(T)||"IE"==k&&(T&&!/^Win/.test(T)&&5.5<w||/\bWindows XP\b/.test(T)&&8<w||8==w&&!/\bTrident\b/.test(i)))&&!P.test(t=$.call(R,i.replace(P,"")+";"))&&t.name&&(t="ing as "+t.name+((t=t.version)?" "+t:""),P.test(k)?(/\bIE\b/.test(t)&&"Mac OS"==T&&(T=null),t="identify"+t):(t="mask"+t,k=a?B(a.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(t)&&(T=null),l||(w=null)),v=["Presto"],x.push(t));else k+=" Mobile";(t=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(i)||0)[1])&&(t=[parseFloat(t.replace(/\.(\d)$/,".0$1")),t],"Safari"==k&&"+"==t[1].slice(-1)?(k="WebKit Nightly",y="alpha",w=t[1].slice(0,-1)):w!=t[1]&&w!=(t[2]=(/\bSafari\/([\d.]+\+?)/i.exec(i)||0)[1])||(w=null),t[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(i)||0)[1],537.36==t[0]&&537.36==t[2]&&28<=parseFloat(t[1])&&"WebKit"==v&&(v=["Blink"]),t=l&&(c||t[1])?(v&&(v[1]="like Chrome"),t[1]||((t=t[0])<530?1:t<532?2:t<532.05?3:t<533?4:t<534.03?5:t<534.07?6:t<534.1?7:t<534.13?8:t<534.16?9:t<534.24?10:t<534.3?11:t<535.01?12:t<535.02?"13+":t<535.07?15:t<535.11?16:t<535.19?17:t<536.05?18:t<536.1?19:t<537.01?20:t<537.11?"21+":t<537.13?23:t<537.18?24:t<537.24?25:t<537.36?26:"Blink"!=v?"27":"28")):(v&&(v[1]="like Safari"),(t=t[0])<400?1:t<500?2:t<526?3:t<533?4:t<534?"4+":t<535?5:t<537?6:t<538?7:t<601?8:t<602?9:t<604?10:t<606?11:t<608?12:"12"),v&&(v[1]+=" "+(t+="number"==typeof t?".x":/[.+]/.test(t)?"":"+")),"Safari"==k&&(!w||45<parseInt(w))?w=t:"Chrome"==k&&/\bHeadlessChrome/i.test(i)&&x.unshift("headless")),"Opera"==k&&(t=/\bzbov|zvav$/.exec(T))?(k+=" ",x.unshift("desktop mode"),"zvav"==t?(k+="Mini",w=null):k+="Mobile",T=T.replace(RegExp(" *"+t+"$"),"")):"Safari"==k&&/\bChrome\b/.exec(v&&v[1])?(x.unshift("desktop mode"),k="Chrome Mobile",w=null,T=/\bOS X\b/.test(T)?(E="Apple","iOS 4.3+"):null):/\bSRWare Iron\b/.test(k)&&!w&&(w=C("Chrome")),(T=w&&0==w.indexOf(t=/[\d.]+$/.exec(T))&&-1<i.indexOf("/"+t+"-")?L(T.replace(t,"")):T)&&-1!=T.indexOf(k)&&!RegExp(k+" OS").test(T)&&(T=T.replace(RegExp(" *"+j(k)+" *"),"")),v&&!/\b(?:Avant|Nook)\b/.test(k)&&(/Browser|Lunascape|Maxthon/.test(k)||"Safari"!=k&&/^iOS/.test(T)&&/\bSafari\b/.test(v[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(k)&&v[1])&&(t=v[v.length-1])&&x.push(t),x.length&&(x=["("+x.join("; ")+")"]),E&&O&&O.indexOf(E)<0&&x.push("on "+E),O&&x.push((/^on /.test(x[x.length-1])?"":"on ")+O),T&&(t=/ ([\d.+]+)$/.exec(T),n=t&&"/"==T.charAt(T.length-t[0].length-1),T={architecture:32,family:t&&!n?T.replace(t[0],""):T,version:t?t[1]:null,toString:function(){var e=this.version;return this.family+(e&&!n?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(t=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(S))&&!/\bi686\b/i.test(S)?(T&&(T.architecture=64,T.family=T.family.replace(RegExp(" *"+t),"")),k&&(/\bWOW64\b/i.test(i)||l&&/\w(?:86|32)$/.test(s.cpuClass||s.platform)&&!/\bWin64; x64\b/i.test(i))&&x.unshift("32-bit")):T&&/^OS X/.test(T.family)&&"Chrome"==k&&39<=parseFloat(w)&&(T.architecture=64),i=i||null;var I={};return I.description=i,I.layout=v&&v[0],I.manufacturer=E,I.name=k,I.prerelease=y,I.product=O,I.ua=i,I.version=k&&w,I.os=T||{architecture:null,family:null,version:null,toString:function(){return"null"}},I.parse=$,I.toString=function(){return this.description||""},I.version&&x.unshift(w),I.name&&x.unshift(k),T&&k&&(T!=String(T).split(" ")[0]||T!=k.split(" ")[0]&&!O)&&x.push(O?"("+T+")":"on "+T),x.length&&(I.description=x.join(" ")),I}t=$();n&&e?R(t,function(e,t){n[t]=e}):_.platform=t}.call(l),e.exports);let f;const h=new Uint8Array(16);const g=[];for(let e=0;e<256;++e)g.push((e+256).toString(16).slice(1));let m,S,x=0,y=0;function w(e,t,n){var r=t&&n||0,o=t||new Array(16);let i=(e=e||{}).node||m,a=void 0!==e.clockseq?e.clockseq:S;null!=i&&null!=a||(n=e.random||(e.rng||function(){if(f=f||"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto))return f(h);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")})(),null==i&&(i=m=[1|n[0],n[1],n[2],n[3],n[4],n[5]]),null==a&&(a=S=16383&(n[6]<<8|n[7])));n=void 0!==e.msecs?e.msecs:Date.now();let s=void 0!==e.nsecs?e.nsecs:y+1;var l=n-x+(s-y)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),1e4<=(s=(l<0||n>x)&&void 0===e.nsecs?0:s))throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");x=n,y=s,S=a;var l=(1e4*(268435455&(n+=122192928e5))+s)%4294967296,e=(o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l,n/4294967296*1e4&268435455);o[r++]=e>>>8&255,o[r++]=255&e,o[r++]=e>>>24&15|16,o[r++]=e>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(let e=0;e<6;++e)o[r+e]=i[e];return t||(l=o,n=0,(g[l[n+0]]+g[l[n+1]]+g[l[n+2]]+g[l[n+3]]+"-"+g[l[n+4]]+g[l[n+5]]+"-"+g[l[n+6]]+g[l[n+7]]+"-"+g[l[n+8]]+g[l[n+9]]+"-"+g[l[n+10]]+g[l[n+11]]+g[l[n+12]]+g[l[n+13]]+g[l[n+14]]+g[l[n+15]]).toLowerCase())}function v(){var i=[],a={};function e(o){return function(){for(var e,t=[],n=[],r=0;r<arguments.length;r++)arguments[r]===a?(e=i.shift(),t.push("%c"+e.value,"%c "),n.push(e.css,"")):"object"==typeof(e=arguments[r])||"function"==typeof e?(t.push("%o","%c "),n.push(e,"")):(t.push("%c"+e,"%c "),n.push("",""));o(t.join(""),...n),i=[]}}return{log:e(console.log),warn:e(console.warn),error:e(console.error),trace:e(console.trace),group:e(console.group),groupEnd:e(console.groupEnd),asAlert:function(e){return i.push({value:e,css:"display: inline-block ; background-color: #e0005a ; color: #ffffff ; font-weight: bold ; padding: 3px 7px 3px 7px ; border-radius: 3px 3px 3px 3px ;"}),a},asWarning:function(e){return i.push({value:e,css:"display: inline-block ; background-color: gold ; color: black ; font-weight: bold ; padding: 3px 7px 3px 7px ; border-radius: 3px 3px 3px 3px ;"}),a}}}function k(e){return document.getElementById(e)||document.getElementsByName(e)[0]||document.querySelector(e)}function O(){var e={};return e.title=document.title,e.url=window.location.href,e.eventTime=(new Date).getTime(),e.browserType=t.name,e.browserVersion=t.version,e.browserEngine=t.layout,e.osType=t.os.family,e.osVersion=t.os.version,e.language=function(){var e=navigator.language;if(!e)e=navigator.browserLanguage;return e}(),e.referrer=document.referrer,e}function E(e,t,n){var r=new XMLHttpRequest;r.open("POST",e,!1),r.setRequestHeader("Content-Type","application/json; charset=utf-8"),r.setRequestHeader("apikey",n.apikey),r.send(JSON.stringify(t))}function T(n){var r=history[n];return function(){var e=r.apply(this,arguments),t=new Event(n);return t.arguments=arguments,window.dispatchEvent(t),e}}const M=e=>((e=e||window.event)&&(e.target||(e.target=e.srcElement),e.currentTarget||(e.currentTarget=e.srcElement)),e),C=()=>{let e="addEventListener",t="removeEventListener",n="";return window.addEventListener||(e="attachEvent",t="detachEvent",n="on"),{addMethod:e,removeMethod:t,prefix:n}},I={useClass:!1,appid:"default",uuid:"",userInfo:{},extra:{},enableTrackerKey:!1,enableHeatMapTracker:!1,enableLoadTracker:!1,enableHistoryTracker:!1,enableHashTracker:!1,enableClosedTracker:!1,apikey:"",requestUrl:"http://localhost:3000",reportWhiteList:[]},_=["click","dblclick","contextmenu","mousedown","mouseup","mouseenter","mouseout","mouseover"],P=["popstate","pushState","replaceState","hashchange","beforeunload"];return class{constructor(e){this._isInstall=!1,this._options={},this.timeStr=null,this.reportWhiteListVaild(e)&&this._init(e)}reportWhiteListVaild(e){var t;return!!window.location&&(t=window.location["hostname"],e.reportWhiteList.includes(t))}_init(e={}){this._setConfig(e),this._setUuid(),this._installInnerTrack(),(e=v()).group(e.asWarning("埋点注入成功")),e.log("Make sure the key is correct"),e.log("Ensure that data is whitelisted",e.asAlert("Important!")),e.log("Track"),e.log("maintain",e.asWarning("Strong")),e.groupEnd()}_setConfig(e){e=b(!0,{},I,e),this._options=e}_setUuid(){var e=function(){var e="VLAB_TRACKER_UUID";let t=localStorage.getItem(e);return t||(t=w(),localStorage.setItem(e,t)),t}();this._options.uuid=e}setUserId(e){this._options.userId=e}setUserInfo(e){this._options.userInfo=e}setExtra(e){this._options.extra=e}_trackerKeyReport(){const t=this;var e=C();window[e.addMethod](e.prefix+"click",function(e){e=M(e).target.getAttribute("tracker-key");e&&t.sendTracker("click",e,{})},!1)}_captureEvents(n,o){const i=this;var a=C();for(let e=0,t=n.length;e<t;e++){let r=n[e];window[a.addMethod](a.prefix+r,function(e){var t,n,e=M(e);e&&("load"===r&&(i.timeStr=(new Date).getTime()),-1<_.indexOf(r)?(t=i._getDomAndOffset(e),i.sendTracker(e.type,o,t)):-1<P.indexOf(r)?(t=i._getInOutTimePage(),n={tag:"beforeunload"===r?0:1},i.sendTracker(e.type,o,{...t,...n}),this.timeStr=(new Date).getTime()):i.sendTracker(e.type,o,{}))},!1)}}_getDomAndOffset(e){var t,n,r,o=((e,n=!1)=>{if(!(e instanceof HTMLElement))return console.warn("input is not a HTML element!"),"";var r=[];let o=e;for(;o;){let t=((e,t=false)=>{const n=[];if(!e||!e.tagName)return"";if(e.id)return`#${e.id}`;if(n.push(e.tagName.toLowerCase()),t){const r=e.className;if(r&&typeof r==="string"){const o=r.split(/\s+/);n.push(`.${o.join(".")}`)}}if(e.name)n.push(`[name=${e.name}]`);return n.join("")})(o,n);if(!t)break;if(r.unshift(t),k(r.join(">"))===e||0<=t.indexOf("body"))break;r.shift();var i=o.parentNode.children;if(1<i.length)for(let e=0;e<i.length;e++)if(i[e]===o){t+=`:nth-child(${e+1})`;break}if(r.unshift(t),k(r.join(">"))===e)break;o=o.parentNode}return r.join(">")})(e.target,this._options.useClass),i=(i=(i=e.target).getBoundingClientRect(),n=i.width||i.right-i.left,t=i.heigth||i.bottom-i.top,b({},i,{width:n,heigth:t}));if(0!=i.width&&0!=i.height)return t=((n=document.documentElement||document.body.parentNode)&&"number"==typeof n.scrollLeft?n:document.body).scrollLeft,n=(n&&"number"==typeof n.scrollTop?n:document.body).scrollTop,r=e.pageX||e.clientX+t,e=e.pageY||e.clientY+n,{domPath:encodeURIComponent(o),offsetX:((r-i.left-t)/i.width).toFixed(6),offsetY:((e-i.top-n)/i.height).toFixed(6)}}_getInOutTimePage(){return{pageInTime:this.timeStr,pageOutTime:(new Date).getTime()}}sendTracker(e,t,n={}){var t={userId:this._options.userId,appid:this._options.appid,uuid:this._options.uuid,userInfo:this._options.userInfo,eventType:e,eventId:t,...(e={},e.performance=window.performance.timing,e),...O(),...this._options.extra},{apikey:e,requestUrl:r}=this._options,t=b(!0,{},t,n);E(r,t,{apikey:e})}_installInnerTrack(){return this._isInstall||(this._options.enableTrackerKey&&this._trackerKeyReport(),this._options.enableHeatMapTracker&&this._openInnerTrack(["click"],"innerHeatMap"),this._options.enableLoadTracker&&this._openInnerTrack(["load"],"innerPageLoad"),this._options.enableHistoryTracker&&(this._openInnerTrack(["load"],"innerPageLoad"),history.pushState=T("pushState"),history.replaceState=T("replaceState"),this._openInnerTrack(["pushState"],"innerHistoryChange"),this._openInnerTrack(["replaceState"],"innerHistoryChange")),this._options.enableClosedTracker&&this._openInnerTrack(["beforeunload"],"innerClosedPage"),this._options.enableHashTracker&&(this._openInnerTrack(["load"],"innerPageLoad"),this._openInnerTrack(["hashchange"],"innerHashChange")),this._isInstall=!0),this}_openInnerTrack(e,t){return this._captureEvents(e,t)}}});
//# sourceMappingURL=index.js.map
